<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valentine Qualification</title>
    <style>
        body, html {
            height: 100%; width: 100%; margin: 0; padding: 0;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            overflow: hidden; display: flex; justify-content: center; align-items: center;
            background-color: #fff0f3;
        }

        /* FIXED BACKGROUND */
        #mobile-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            background: url('https://raw.githubusercontent.com/prashantDefender/For-my-Valentine/main/IMG-20260110-WA0007.jpg') no-repeat center center;
            background-size: cover;
            opacity: 0.5;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px; border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            text-align: center; max-width: 350px; width: 85%;
            border: 4px solid #ff4d6d; z-index: 10;
        }

        .kitty-img { width: 120px; margin-bottom: 15px; }
        h1 { color: #ff4d6d; font-size: 1.4rem; margin-bottom: 20px; min-height: 80px; }

        /* BUTTON ALIGNMENT: Side by side starting position */
        .btn-container {
            display: flex; 
            justify-content: center; 
            align-items: center;
            gap: 20px;
            min-height: 120px; 
            position: relative;
        }

        button {
            padding: 12px 24px; font-size: 1.1rem; border: none;
            border-radius: 50px; cursor: pointer; font-weight: bold;
            touch-action: manipulation;
            min-width: 100px;
        }

        #yesBtn { background: #ff4d6d; color: white; transition: all 0.2s; }
        #noBtn { background: #6c757d; color: white; }

        .moving { position: fixed !important; z-index: 2000 !important; }

        .popup {
            display: none; position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%); background: white;
            padding: 25px; border-radius: 20px; box-shadow: 0 0 100px rgba(0,0,0,0.5);
            z-index: 9999; text-align: center; border: 3px solid #ff4d6d; width: 270px;
        }
        .popup button { background: #ff4d6d; color: white; margin-top: 15px; padding: 10px 20px; border-radius: 10px; width: auto;}
    </style>
</head>
<body>

    <div id="mobile-bg"></div>

    <audio id="bgMusic" loop preload="auto">
        <source src="https://raw.githubusercontent.com/prashantDefender/For-my-Valentine/main/Edd_Sheeran_-_Perfect_(mp3.pm).mp3" type="audio/mpeg">
    </audio>

    <div id="main-card" class="card">
        <img src="https://raw.githubusercontent.com/prashantDefender/For-my-Valentine/main/shy-cute.gif" class="kitty-img">
        <h1 id="question-text">First, do you think I'm the funniest guy you know?</h1>
        <div class="btn-container">
            <button id="yesBtn" onclick="onYesClick()">Yes</button>
            <button id="noBtn" onclick="onNoClick()" onmouseover="onNoHover()" ontouchstart="onNoHover()">No</button>
        </div>
    </div>

    <div id="popup" class="popup">
        <h2 id="popup-title"></h2>
        <p id="popup-msg"></p>
        <button onclick="closePopup()">Close</button>
    </div>

    <script>
        let currentStep = 0;
        let noCount = 0;
        const music = document.getElementById('bgMusic');

        const stages = [
            "First, do you think I'm the funniest guy you know?",
            "Do you ever get scared of me ?",
            "Is it true that you have the most handsome boyfriend ever?",
            "Will you be my Valentine? ‚ù§Ô∏è"
        ];

        const popupMessages = [
            {title: "ü§® Wait...", msg: "Did you just try to click No?"},
            {title: "üôÑ Nice try!", msg: "That's not even an option today."},
            {title: "üò± Oh No!", msg: "The 'No' button is definitely broken..."},
            {title: "‚ù§Ô∏è Give up!", msg: "Just say Yes already! ü•∞"}
        ];

        function onNoHover() {
            const noBtn = document.getElementById('noBtn');
            noBtn.classList.add('moving');
            
            const x = Math.max(10, Math.random() * (window.innerWidth - 110));
            const y = Math.max(10, Math.random() * (window.innerHeight - 50));
            
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';

            if (currentStep === 3) {
                if (noCount < popupMessages.length) {
                    document.getElementById('popup-title').innerText = popupMessages[noCount].title;
                    document.getElementById('popup-msg').innerText = popupMessages[noCount].msg;
                    document.getElementById('popup').style.display = 'block';
                    noCount++;
                }
                const yesBtn = document.getElementById('yesBtn');
                let size = parseFloat(window.getComputedStyle(yesBtn).fontSize);
                yesBtn.style.fontSize = (size + 5) + 'px';
            }
        }

        function onNoClick() { onNoHover(); }

        function onYesClick() {
            // Unlocks audio for mobile on the very first click
            if (currentStep === 0) {
                music.play().then(() => {
                    music.pause(); // Just "primes" the audio
                    music.currentTime = 0;
                }).catch(e => console.log("Audio waiting for final yes"));
            }

            if (currentStep === 3) {
                music.play();
                document.getElementById('main-card').innerHTML = `
                    <h1>YAY! ‚ù§Ô∏è I love you! üéâ</h1>
                    <p>I found a girl, beautiful and sweet... üé∂</p>
                    <img src="https://raw.githubusercontent.com/prashantDefender/For-my-Valentine/main/aww.gif" style="width:100%; border-radius:15px;">
                `;
                startConfetti();
            } else {
                currentStep++;
                document.getElementById('question-text').innerText = stages[currentStep];
                
                // RESET NO BUTTON: Snaps back to side-by-side
                const noBtn = document.getElementById('noBtn');
                noBtn.classList.remove('moving');
                noBtn.style.position = 'relative';
                noBtn.style.left = 'auto';
                noBtn.style.top = 'auto';
            }
        }

        function closePopup() { document.getElementById('popup').style.display = 'none'; }

        function startConfetti() {
            for(let i=0; i<50; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.style.position = 'fixed';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = '-20px';
                heart.style.fontSize = '20px';
                heart.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                document.body.appendChild(heart);
            }
        }
    </script>
    <style> @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } } </style>
</body>
</html>
